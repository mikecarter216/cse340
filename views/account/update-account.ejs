<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Update Account</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>
  <%- include("../partials/header") %>

  <main class="form-container">
    <h1>Update Account</h1>

    <% if (message) { %>
      <p class="flash-message"><%= message %></p>
    <% } %>

    <!-- ✅ ACCOUNT UPDATE FORM with enctype and avatar input -->
    <form action="/account/update" method="POST" enctype="multipart/form-data" class="update-form">
      <label for="firstname">First Name</label>
      <input
        type="text"
        id="firstname"
        name="firstname"
        required
        value="<%= account.firstname %>"
      />

      <label for="lastname">Last Name</label>
      <input
        type="text"
        id="lastname"
        name="lastname"
        required
        value="<%= account.lastname %>"
      />

      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        name="email"
        required
        value="<%= account.email %>"
      />

      <!-- ✅ Profile Avatar Preview -->
      <% if (account.avatar) { %>
        <div>
          <p>Current Profile Image:</p>
          <img src="/images/<%= account.avatar %>" alt="Profile Image" width="150" style="border-radius: 10px;" />
        </div>
      <% } %>

      <!-- ✅ Avatar Upload Field -->
      <label for="avatar">Upload New Profile Image</label>
      <input type="file" name="avatar" id="avatar" accept="image/*" />

      <button type="submit">Update Account</button>
    </form>

    <hr />

    <h2>Change Password</h2>

    <form action="/account/change-password" method="POST" class="password-form">
      <label for="currentPassword">Current Password</label>
      <input type="password" id="currentPassword" name="currentPassword" required />

      <label for="newPassword">New Password</label>
      <input type="password" id="newPassword" name="newPassword" required minlength="6" />

      <label for="confirmPassword">Confirm New Password</label>
      <input type="password" id="confirmPassword" name="confirmPassword" required minlength="6" />

      <button type="submit">Change Password</button>
    </form>
  </main>

  <%- include("../partials/footer") %>
</body>
</html>
